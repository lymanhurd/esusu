# esusu
 This repository contains answers for the Esusu Credit Reporting Domain Challenge.  It contains the business logic for the assignments in addition to a skeletal Rest API.  I believe that I would have been better served to start by using an ORM, but I took it upon myself to create the database from scratch, and at this point I would like to respectfully submit what I got to as this is burning more time than I had originally intended!

1. I include the ER diagram in this top-level directory.  I made some assumptions outlined as a comment in that diagram on aspects I thought were not completely clear.
2. This service is implemented in apartment_service.py and unit tested in apartment_test.py.  I did, in fact, write this class by using TDD (e.g., discovered that using "int()" instead of "round()" in the payment service led to off-by-one errors).  The service has some limitations for simplicity, e.g., the sqlite implementation does not enforce foreign key constraints (this meant, for example, that the code never instantiates the PropertyManager table).  I also did not add the "NOT NULL" qualifier, although there are several columns for which it would be appropriate 
3. I started on the Web API in rest_api.py.  I added one API to encompass both the apartment (CRU) service and the payment service.  My intention was to glue together the business layer with the API, and researched the best way to test a FastAPI api, but I ran out of time when I realized that I needed to code a more substantive database layer to prove that the calls worked in succession.
4. See discussion in 3.  The business logic is encapsulated in payment_service.py (and tested in payment_test.py).
5. I considered at some length the implications of keeping an arbitrary payment history.  Given the current structure of the tables, the main difference I found was that the schema asusmed that a tenant is associated with one and only one apartment, which over time could be subject to change.  Also the current schema does not allow for a tenant opting out (there are other obvious omissions such as any notion of authenticati0on or authorization and the midding "D" in "CRUD" operations).  I would suggest that the Tenants table add a start and end date to their occupancy of a specific apartment as well as an indicator whether they are active (that way we can keep records for former participants).  A different approach would be to remove the foreign key constraint between payments and tenants which would allow for computing aggregates even if the referenced tenants (we would obviously never reuse Tenant_IDs) still existed.
